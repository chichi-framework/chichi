import{TRANSITION_END,emulateTransitionEnd,getSelectorFromElement,getElementFromSelector,getTransitionDurationFromElement,isElement,reflow}from"./util/index";import Data from"./dom/data";import EventHandler from"./dom/event-handler";import Manipulator from"./dom/manipulator";import SelectorEngine from"./dom/selector-engine";const ACCORDION_NAME="accordion",ACCORDION_VERSION="0.1.0-alpha1",ACCORDION_DATA_KEY="chichi.accordion",ACCORDION_EVENT_KEY=".chichi.accordion",ACCORDION_DATA_API_KEY=".data-api",AccordionDefaults={toggle:!0,parent:""},ACCORDION_EVENT_SHOW="show.chichi.accordion",ACCORDION_EVENT_SHOWN="shown.chichi.accordion",ACCORDION_EVENT_HIDE="hide.chichi.accordion",ACCORDION_EVENT_HIDDEN="hidden.chichi.accordion",ACCORDION_EVENT_CLICK_DATA_API="click.chichi.accordion.data-api",ACCORDION_CLASS_NAME_SHOW="is-active",ACCORDION_CLASS_NAME_COLLAPSE="accordion",ACCORDION_CLASS_NAME_COLLAPSING="is-collapsing",ACCORDION_CLASS_NAME_COLLAPSED="is-collapsed",ACCORDION_WIDTH="width",ACCORDION_HEIGHT="height",ACCORDION_SELECTOR_ACTIVES=".is-active, .is-collapsing",ACCORDION_SELECTOR_DATA_TOGGLE='[data-toggle="accordion"]';class Accordion{constructor(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=SelectorEngine.find(`[data-toggle="accordion"][href="#${t.id}"],[data-toggle="accordion"][data-target="#${t.id}"]`);const i=SelectorEngine.find('[data-toggle="accordion"]');for(let e=0,n=i.length;e<n;e++){const n=i[e],s=getSelectorFromElement(n),r=SelectorEngine.find(s).filter(e=>e===t);null!==s&&r.length&&(this._selector=s,this._triggerArray.push(n))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndAccordiondClass(this._element,this._triggerArray),this._config.toggle&&this.toggle(),Data.setData(t,"chichi.accordion",this)}static get VERSION(){return VERSION}static get Default(){return AccordionDefaults}toggle(){this._element.classList.contains("is-active")?this.hide():this.show()}show(){if(this._isTransitioning||this._element.classList.contains("is-active"))return;let t,e;this._parent&&(t=SelectorEngine.find(ACCORDION_SELECTOR_ACTIVES,this._parent).filter(t=>"string"==typeof this._config.parent?t.getAttribute("data-parent")===this._config.parent:t.classList.contains("accordion")),0===t.length&&(t=null));const i=SelectorEngine.findOne(this._selector);if(t){const n=t.filter(t=>i!==t);if(e=n[0]?Data.getData(n[0],"chichi.accordion"):null,e&&e._isTransitioning)return}if(EventHandler.trigger(this._element,ACCORDION_EVENT_SHOW).defaultPrevented)return;t&&t.forEach(t=>{i!==t&&Accordion.collapseInterface(t,"hide"),e||Data.setData(t,"chichi.accordion",null)});const n=this._getDimension();this._element.classList.remove("accordion"),this._element.classList.add("is-collapsing"),this._element.style[n]=0,this._triggerArray.length&&this._triggerArray.forEach(t=>{t.classList.remove("is-collapsed"),t.setAttribute("aria-expanded",!0)}),this.setTransitioning(!0);const s="scroll"+(n[0].toUpperCase()+n.slice(1)),r=getTransitionDurationFromElement(this._element);EventHandler.one(this._element,TRANSITION_END,()=>{this._element.classList.remove("is-collapsing"),this._element.classList.add("accordion","is-active"),this._element.style[n]="",this.setTransitioning(!1),EventHandler.trigger(this._element,ACCORDION_EVENT_SHOWN)}),emulateTransitionEnd(this._element,r),this._element.style[n]=this._element[s]+"px"}hide(){if(this._isTransitioning||!this._element.classList.contains("is-active"))return;if(EventHandler.trigger(this._element,ACCORDION_EVENT_HIDE).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=this._element.getBoundingClientRect()[t]+"px",reflow(this._element),this._element.classList.add("is-collapsing"),this._element.classList.remove("accordion","is-active");const e=this._triggerArray.length;if(e>0)for(let t=0;t<e;t++){const e=this._triggerArray[t],i=getElementFromSelector(e);i&&!i.classList.contains("is-active")&&(e.classList.add("is-collapsed"),e.setAttribute("aria-expanded",!1))}this.setTransitioning(!0);this._element.style[t]="";const i=getTransitionDurationFromElement(this._element);EventHandler.one(this._element,TRANSITION_END,()=>{this.setTransitioning(!1),this._element.classList.remove("is-collapsing"),this._element.classList.add("accordion"),EventHandler.trigger(this._element,ACCORDION_EVENT_HIDDEN)}),emulateTransitionEnd(this._element,i)}setTransitioning(t){this._isTransitioning=t}dispose(){Data.removeData(this._element,"chichi.accordion"),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null}_getConfig(t){return(t={...AccordionDefaults,...t}).toggle=Boolean(t.toggle),t}_getDimension(){return this._element.classList.contains("width")?"width":"height"}_getParent(){let{parent:t}=this._config;isElement(t)?void 0===t.jquery&&void 0===t[0]||(t=t[0]):t=SelectorEngine.findOne(t);const e=`[data-toggle="accordion"][data-parent="${t}"]`;return SelectorEngine.find(e,t).forEach(t=>{const e=getElementFromSelector(t);this._addAriaAndAccordiondClass(e,[t])}),t}_addAriaAndAccordiondClass(t,e){if(t){const i=t.classList.contains("is-active");e.length&&e.forEach(t=>{i?t.classList.remove("is-collapsed"):t.classList.add("is-collapsed"),t.setAttribute("aria-expanded",i)})}}static collapseInterface(t,e){let i=Data.getData(t,"chichi.accordion");const n={...AccordionDefaults,...Manipulator.getDataAttributes(t),..."object"==typeof e&&e?e:{}};if(!i&&n.toggle&&"string"==typeof e&&/show|hide/.test(e)&&(n.toggle=!1),i||(i=new Accordion(t,n)),"string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}}static getInstance(t){return Data.getData(t,"chichi.accordion")}}EventHandler.on(document,ACCORDION_EVENT_CLICK_DATA_API,'[data-toggle="accordion"]',(function(t){"A"===t.target.tagName&&t.preventDefault();const e=Manipulator.getDataAttributes(this),i=getSelectorFromElement(this);SelectorEngine.find(i).forEach(t=>{const i=Data.getData(t,"chichi.accordion");let n;i?(null===i._parent&&"string"==typeof e.parent&&(i._config.parent=e.parent,i._parent=i._getParent()),n="toggle"):n=e,Accordion.collapseInterface(t,n)})}));export default Accordion;import{TRANSITION_END,emulateTransitionEnd,getElementFromSelector,getTransitionDurationFromElement}from"./util/index";import Data from"./dom/data";import EventHandler from"./dom/event-handler";const ALERT_NAME="alert",ALERT_VERSION="0.1.0-alpha1",ALERT_DATA_KEY="chichi.alert",ALERT_EVENT_KEY=".chichi.alert",ALERT_DATA_API_KEY=".data-api",ALERT_SELECTOR_DISMISS='[data-dismiss="alert"]',ALERT_EVENT_CLOSE="close.chichi.alert",ALERT_EVENT_CLOSED="closed.chichi.alert",ALERT_EVENT_CLICK_DATA_API="click.chichi.alert.data-api",CLASSNAME_ALERT="alert",ALERT_CLASSNAME_FADE="fade",ALERT_CLASSNAME_SHOW="show";class Alert{constructor(t){this._element=t,this._element&&Data.setData(t,"chichi.alert",this)}static get VERSION(){return ALERT_VERSION}close(t){let e=this._element;t&&(e=this._getRootElement(t));const i=this._triggerCloseEvent(e);null===i||i.defaultPrevented||this._removeElement(e)}dispose(){Data.removeData(this._element,"chichi.alert"),this._element=null}_getRootElement(t){return getElementFromSelector(t)||t.closest("."+ALERT_CLASSNAME_ALERT)}_triggerCloseEvent(t){return EventHandler.trigger(t,ALERT_EVENT_CLOSE)}_removeElement(t){if(t.classList.remove("show"),!t.classList.contains("fade"))return void this._destroyElement(t);const e=getTransitionDurationFromElement(t);EventHandler.one(t,TRANSITION_END,()=>this._destroyElement(t)),emulateTransitionEnd(t,e)}_destroyElement(t){t.parentNode&&t.parentNode.removeChild(t),EventHandler.trigger(t,ALERT_EVENT_CLOSED)}static jQueryInterface(t){return this.each((function(){let e=Data.getData(this,"chichi.alert");e||(e=new Alert(this)),"close"===t&&e[t](this)}))}static handleDismiss(t){return function(e){e&&e.preventDefault(),t.close(this)}}static getInstance(t){return Data.getData(t,"chichi.alert")}}EventHandler.on(document,ALERT_EVENT_CLICK_DATA_API,ALERT_SELECTOR_DISMISS,Alert.handleDismiss(new Alert));export default Alert;import Data from"./dom/data";import EventHandler from"./dom/event-handler";const BUTTON_NAME="button",BUTTON_VERSION="0.1.0-alpha1",BUTTON_DATA_KEY="chichi.button",BUTTON_EVENT_KEY=".chichi.button",BUTTON_DATA_API_KEY=".data-api",BUTTON_CLASS_NAME_ACTIVE="is-active",BUTTON_SELECTOR_DATA_TOGGLE='[data-toggle="button"]',BUTTON_EVENT_CLICK_DATA_API="click.chichi.button.data-api";class Button{constructor(t){this._element=t,Data.setData(t,"chichi.button",this)}static get VERSION(){return"0.1.0-alpha1"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("is-active"))}dispose(){Data.removeData(this._element,"chichi.button"),this._element=null}static getInstance(t){return Data.getData(t,"chichi.button")}}EventHandler.on(document,BUTTON_EVENT_CLICK_DATA_API,'[data-toggle="button"]',t=>{t.preventDefault();const e=t.target.closest('[data-toggle="button"]');let i=Data.getData(e,"chichi.button");i||(i=new Button(e)),i.toggle()});export default Button;import{getElementFromSelector,isElement,isVisible,noop}from"./util/index";import Data from"./dom/data";import EventHandler from"./dom/event-handler";import Manipulator from"./dom/manipulator";import Popper from"popper.js";import SelectorEngine from"./dom/selector-engine";const DROPDOWN_NAME="dropdown",DROPDOWN_VERSION="0.1.0-alpha1",DROPDOWN_DATA_KEY="chichi.dropdown",DROPDOWN_EVENT_KEY=".chichi.dropdown",DROPDOWN_DATA_API_KEY=".data-api",DROPDOWN_ESCAPE_KEY="Escape",DROPDOWN_SPACE_KEY="Space",DROPDOWN_TAB_KEY="Tab",DROPDOWN_ARROW_UP_KEY="ArrowUp",DROPDOWN_ARROW_DOWN_KEY="ArrowDown",DROPDOWN_RIGHT_MOUSE_BUTTON=2,DROPDOWN_REGEXP_KEYDOWN=new RegExp("ArrowUp|ArrowDown|Escape"),DROPDOWN_EVENT_HIDE="hide.chichi.dropdown",DROPDOWN_EVENT_HIDDEN="hidden.chichi.dropdown",DROPDOWN_EVENT_SHOW="show.chichi.dropdown",DROPDOWN_EVENT_SHOWN="shown.chichi.dropdown",DROPDOWN_EVENT_CLICK="click.chichi.dropdown",DROPDOWN_EVENT_CLICK_DATA_API="click.chichi.dropdown"+DATA_API_KEY,DROPDOWN_EVENT_KEYDOWN_DATA_API="keydown.chichi.dropdown"+DATA_API_KEY,DROPDOWN_EVENT_KEYUP_DATA_API="keyup.chichi.dropdown"+DATA_API_KEY,DROPDOWN_CLASS_NAME_DISABLED="disabled",DROPDOWN_CLASS_NAME_ACTIVE="is-active",DROPDOWN_CLASS_NAME_DROPUP="is-up",DROPDOWN_CLASS_NAME_DROPRIGHT="is-right",DROPDOWN_CLASS_NAME_DROPLEFT="is-left",DROPDOWN_CLASS_NAME_MENURIGHT="dropdown-menu-right",DROPDOWN_CLASS_NAME_NAVBAR="navbar",DROPDOWN_CLASS_NAME_POSITION_STATIC="is-static",DROPDOWN_SELECTOR_DATA_TOGGLE='[data-toggle="dropdown"]',DROPDOWN_SELECTOR_FORM_CHILD=".dropdown form",DROPDOWN_SELECTOR_MENU=".dropdown-menu",DROPDOWN_SELECTOR_NAVBAR_NAV=".navbar-item",DROPDOWN_SELECTOR_VISIBLE_ITEMS=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",DROPDOWN_PLACEMENT_TOP="top-start",DROPDOWN_PLACEMENT_TOPEND="top-end",DROPDOWN_PLACEMENT_BOTTOM="bottom-start",DROPDOWN_PLACEMENT_BOTTOMEND="bottom-end",DROPDOWN_PLACEMENT_RIGHT="right-start",DROPDOWN_PLACEMENT_LEFT="left-start",DropdownDefaults={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null};class Dropdown{constructor(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners(),Data.setData(t,"chichi.dropdown",this)}static get VERSION(){return"0.1.0-alpha1"}static get Default(){return DropdownDefaults}toggle(){if(this._element.disabled||this._element.classList.contains("disabled"))return;const t=this._element.classList.contains("is-active");Dropdown.clearMenus(),t||this.show()}show(){if(this._element.disabled||this._element.classList.contains("disabled")||this._menu.classList.contains("is-active"))return;const t=Dropdown.getParentFromElement(this._element),e={relatedTarget:this._element};if(!EventHandler.trigger(this._element,DROPDOWN_DROPDOWN_EVENT_SHOW,e).defaultPrevented){if(!this._inNavbar){if(void 0===Popper)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=t:isElement(this._config.reference)&&(e=this._config.reference,void 0!==this._config.reference.jquery&&(e=this._config.reference[0])),"scrollParent"!==this._config.boundary&&t.classList.add("is-static"),this._popper=new Popper(e,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&!t.closest(".navbar-item")&&[].concat(...document.body.children).forEach(t=>EventHandler.on(t,"mouseover",null,noop())),this._element.focus(),this._element.setAttribute("aria-expanded",!0),Manipulator.toggleClass(this._menu,"is-active"),Manipulator.toggleClass(this._element,"is-active"),EventHandler.trigger(t,DROPDOWN_EVENT_SHOWN,e)}}hide(){if(this._element.disabled||this._element.classList.contains("disabled")||!this._menu.classList.contains("is-active"))return;const t=Dropdown.getParentFromElement(this._element),e={relatedTarget:this._element};EventHandler.trigger(t,DROPDOWN_EVENT_HIDE,e).defaultPrevented||(this._popper&&this._popper.destroy(),Manipulator.toggleClass(this._menu,"is-active"),Manipulator.toggleClass(this._element,"is-active"),EventHandler.trigger(t,DROPDOWN_EVENT_HIDDEN,e))}dispose(){Data.removeData(this._element,"chichi.dropdown"),EventHandler.off(this._element,".chichi.dropdown"),this._element=null,this._menu=null,this._popper&&(this._popper.destroy(),this._popper=null)}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.scheduleUpdate()}_addEventListeners(){EventHandler.on(this._element,DROPDOWN_EVENT_CLICK,t=>{t.preventDefault(),t.stopPropagation(),this.toggle()})}_getConfig(t){return t={...this.constructor.Default,...Manipulator.getDataAttributes(this._element),...t}}_getMenuElement(){return SelectorEngine.next(this._element,".dropdown-menu")[0]}_getPlacement(){const t=this._element.parentNode;let e="bottom-start";return t.classList.contains("is-up")?(e="top-start",this._menu.classList.contains("dropdown-menu-right")&&(e="top-end")):t.classList.contains("is-right")?e="right-start":t.classList.contains("is-left")?e="left-start":this._menu.classList.contains("dropdown-menu-right")&&(e="bottom-end"),e}_detectNavbar(){return Boolean(this._element.closest(".navbar"))}_getOffset(){const t={};return"function"==typeof this._config.offset?t.fn=t=>(t.offsets={...t.offsets,...this._config.offset(t.offsets,this._element)||{}},t):t.offset=this._config.offset,t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),{...t,...this._config.popperConfig}}static dropdownInterface(t,e){let i=Data.getData(t,"chichi.dropdown");if(i||(i=new Dropdown(t,"object"==typeof e?e:null)),"string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}}static clearMenus(t){if(t&&(2===t.button||"keyup"===t.type&&"Tab"!==t.key))return;const e=SelectorEngine.find('[data-toggle="dropdown"]');for(let i=0,n=e.length;i<n;i++){const n=Dropdown.getParentFromElement(e[i]),s=Data.getData(e[i],"chichi.dropdown"),r={relatedTarget:e[i]};if(t&&"click"===t.type&&(r.clickEvent=t),!s)continue;const o=s._menu;if(!e[i].classList.contains("is-active"))continue;if(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&"Tab"===t.key)&&o.contains(t.target))continue;EventHandler.trigger(n,DROPDOWN_EVENT_HIDE,r).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(t=>EventHandler.off(t,"mouseover",null,noop())),e[i].setAttribute("aria-expanded","false"),s._popper&&s._popper.destroy(),o.classList.remove("is-active"),e[i].classList.remove("is-active"),EventHandler.trigger(n,DROPDOWN_EVENT_HIDDEN,r))}}static getParentFromElement(t){return getElementFromSelector(t)||t.parentNode}static dataApiKeydownHandler(t){if(/input|textarea/i.test(t.target.tagName)?"Space"===t.key||"Escape"!==t.key&&("ArrowDown"!==t.key&&"ArrowUp"!==t.key||t.target.closest(".dropdown-menu")):!DROPDOWN_REGEXP_KEYDOWN.test(t.key))return;if(t.preventDefault(),t.stopPropagation(),this.disabled||this.classList.contains("disabled"))return;const e=Dropdown.getParentFromElement(this),i=this.classList.contains("is-active");if("Escape"===t.key){return(this.matches(SDROPDOWN_ELECTOR_DATA_TOGGLE)?this:SelectorEngine.prev(this,'[data-toggle="dropdown"]')[0]).focus(),void Dropdown.clearMenus()}if(!i||"Space"===t.key)return void Dropdown.clearMenus();const n=SelectorEngine.find(DROPDOWN_SELECTOR_VISIBLE_ITEMS,e).filter(isVisible);if(!n.length)return;let s=n.indexOf(t.target);"ArrowUp"===t.key&&s>0&&s--,"ArrowDown"===t.key&&s<n.length-1&&s++,s=-1===s?0:s,n[s].focus()}static getInstance(t){return Data.getData(t,"chichi.dropdown")}}EventHandler.on(document,DROPDOWN_EVENT_KEYDOWN_DATA_API,'[data-toggle="dropdown"]',Dropdown.dataApiKeydownHandler),EventHandler.on(document,DROPDOWN_EVENT_KEYDOWN_DATA_API,".dropdown-menu",Dropdown.dataApiKeydownHandler),EventHandler.on(document,DROPDOWN_EVENT_CLICK_DATA_API,Dropdown.clearMenus),EventHandler.on(document,DROPDOWN_EVENT_KEYUP_DATA_API,Dropdown.clearMenus),EventHandler.on(document,DROPDOWN_EVENT_CLICK_DATA_API,'[data-toggle="dropdown"]',(function(t){t.preventDefault(),t.stopPropagation(),Dropdown.dropdownInterface(this,"toggle")})),EventHandler.on(document,DROPDOWN_EVENT_CLICK_DATA_API,".dropdown form",t=>t.stopPropagation());export default Dropdown;import{TRANSITION_END,emulateTransitionEnd,getElementFromSelector,getTransitionDurationFromElement,isVisible,reflow,triggerTransitionEnd}from"./util/index";import Data from"./dom/data";import EventHandler from"./dom/event-handler";import Manipulator from"./dom/manipulator";import SelectorEngine from"./dom/selector-engine";const SLIDER_NAME="slider",SLIDER_VERSION="0.1.0-alpha1",SLIDER_DATA_KEY="chichi.slider",SLIDER_EVENT_KEY=".chichi.slider",SLIDER_DATA_API_KEY=".data-api",SLIDER_ARROW_LEFT_KEY="ArrowLeft",SLIDER_ARROW_RIGHT_KEY="ArrowRight",SLIDER_TOUCHEVENT_COMPAT_WAIT=500,SLIDER_SWIPE_THRESHOLD=40,SliderDefaults={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},SLIDER_DIRECTION_NEXT="next",SLIDER_DIRECTION_PREV="prev",SLIDER_DIRECTION_LEFT="left",SLIDER_DIRECTION_RIGHT="right",SLIDER_EVENT_SLIDE="slide.chichi.slider",SLIDER_EVENT_SLID="slid.chichi.slider",SLIDER_EVENT_KEYDOWN="keydown.chichi.slider",SLIDER_EVENT_MOUSEENTER="mouseenter.chichi.slider",SLIDER_EVENT_MOUSELEAVE="mouseleave.chichi.slider",SLIDER_EVENT_TOUCHSTART="touchstart.chichi.slider",SLIDER_EVENT_TOUCHMOVE="touchmove.chichi.slider",SLIDER_EVENT_TOUCHEND="touchend.chichi.slider",SLIDER_EVENT_POINTERDOWN="pointerdown.chichi.slider",SLIDER_EVENT_POINTERUP="pointerup.chichi.slider",SLIDER_EVENT_DRAG_START="dragstart.chichi.slider",SLIDER_EVENT_LOAD_DATA_API="load.chichi.slider.data-api",SLIDER_EVENT_CLICK_DATA_API="click.chichi.slider.data-api",SLIDER_CLASS_NAME_SLIDER="slider",SLIDER_CLASS_NAME_ACTIVE="is-active",SLIDER_CLASS_NAME_SLIDE="slide",SLIDER_CLASS_NAME_RIGHT="carousel-item-right",SLIDER_CLASS_NAME_LEFT="carousel-item-left",SLIDER_CLASS_NAME_NEXT="carousel-item-next",SLIDER_CLASS_NAME_PREV="carousel-item-prev",SLIDER_CLASS_NAME_POINTER_EVENT="pointer-event",SLIDER_SELECTOR_ACTIVE=".is-active",SLIDER_SELECTOR_ACTIVE_ITEM=".is-active.slider-item",SLIDER_SELECTOR_ITEM=".slider-item",SLIDER_SELECTOR_ITEM_IMG=".slider-item img",SLIDER_SELECTOR_NEXT_PREV=".slider-item-next, .slider-item-prev",SLIDER_SELECTOR_INDICATORS=".slider-indicators",SLIDER_SELECTOR_DATA_SLIDE="[data-slide], [data-slide-to]",SLIDER_SELECTOR_DATA_RIDE='[data-ride="slider"]',PointerType={TOUCH:"touch",PEN:"pen"};class Slider{constructor(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=SelectorEngine.findOne(".slider-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners(),Data.setData(t,"chichi.slider",this)}static get VERSION(){return"0.1.0-alpha1"}static get Default(){return SliderDefaults}next(){this._isSliding||this._slide("next")}nextWhenVisible(){!document.hidden&&isVisible(this._element)&&this.next()}prev(){this._isSliding||this._slide("prev")}pause(t){t||(this._isPaused=!0),SelectorEngine.findOne(SLIDER_SELECTOR_NEXT_PREV,this._element)&&(triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(t){this._activeElement=SelectorEngine.findOne(".is-active.slider-item",this._element);const e=this._getItemIndex(this._activeElement);if(t>this._items.length-1||t<0)return;if(this._isSliding)return void EventHandler.one(this._element,SLIDER_EVENT_SLID,()=>this.to(t));if(e===t)return this.pause(),void this.cycle();const i=t>e?"next":"prev";this._slide(i,this._items[t])}dispose(){EventHandler.off(this._element,".chichi.slider"),Data.removeData(this._element,"chichi.slider"),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null}_getConfig(t){return t={...Default,...t},typeCheckConfig(NAME,t,DefaultType),t}_handleSwipe(){const t=Math.abs(this.touchDeltaX);if(t<=SWIPE_THRESHOLD)return;const e=t/this.touchDeltaX;this.touchDeltaX=0,e>0&&this.prev(),e<0&&this.next()}_addEventListeners(){this._config.keyboard&&EventHandler.on(this._element,SLIDER_EVENT_KEYDOWN,t=>this._keydown(t)),"hover"===this._config.pause&&(EventHandler.on(this._element,SLIDER_EVENT_MOUSEENTER,t=>this.pause(t)),EventHandler.on(this._element,SLIDER_EVENT_MOUSELEAVE,t=>this.cycle(t))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const t=t=>{this._pointerEvent&&PointerType[t.pointerType.toUpperCase()]?this.touchStartX=t.clientX:this._pointerEvent||(this.touchStartX=t.touches[0].clientX)},e=t=>{t.touches&&t.touches.length>1?this.touchDeltaX=0:this.touchDeltaX=t.touches[0].clientX-this.touchStartX},i=t=>{this._pointerEvent&&PointerType[t.pointerType.toUpperCase()]&&(this.touchDeltaX=t.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(t=>this.cycle(t),TOUCHEVENT_COMPAT_WAIT+this._config.interval))};SelectorEngine.find(".slider-item img",this._element).forEach(t=>{EventHandler.on(t,SLIDER_EVENT_DRAG_START,t=>t.preventDefault())}),this._pointerEvent?(EventHandler.on(this._element,SLIDER_EVENT_POINTERDOWN,e=>t(e)),EventHandler.on(this._element,SLIDER_EVENT_POINTERUP,t=>i(t)),this._element.classList.add("pointer-event")):(EventHandler.on(this._element,SLIDER_EVENT_TOUCHSTART,e=>t(e)),EventHandler.on(this._element,SLIDER_EVENT_TOUCHMOVE,t=>e(t)),EventHandler.on(this._element,SLIDER_EVENT_TOUCHEND,t=>i(t)))}_keydown(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.key){case ARROW_LEFT_KEY:t.preventDefault(),this.prev();break;case ARROW_RIGHT_KEY:t.preventDefault(),this.next()}}_getItemIndex(t){return this._items=t&&t.parentNode?SelectorEngine.find(".slider-item",t.parentNode):[],this._items.indexOf(t)}_getItemByDirection(t,e){const i="next"===t,n="prev"===t,s=this._getItemIndex(e),r=this._items.length-1;if((n&&0===s||i&&s===r)&&!this._config.wrap)return e;const o=(s+("prev"===t?-1:1))%this._items.length;return-1===o?this._items[this._items.length-1]:this._items[o]}_triggerSlideEvent(t,e){const i=this._getItemIndex(t),n=this._getItemIndex(SelectorEngine.findOne(".is-active.slider-item",this._element));return EventHandler.trigger(this._element,SLIDER_SLIDER_EVENT_SLIDE,{relatedTarget:t,direction:e,from:n,to:i})}_setActiveIndicatorElement(t){if(this._indicatorsElement){const e=SelectorEngine.find(".is-active",this._indicatorsElement);for(let t=0;t<e.length;t++)e[t].classList.remove("is-active");const i=this._indicatorsElement.children[this._getItemIndex(t)];i&&i.classList.add("is-active")}}_slide(t,e){const i=SelectorEngine.findOne(".is-active.slider-item",this._element),n=this._getItemIndex(i),s=e||i&&this._getItemByDirection(t,i),r=this._getItemIndex(s),o=Boolean(this._interval);let a,l,c;if("next"===t?(a="carousel-item-left",l="carousel-item-next",c="left"):(a="carousel-item-right",l="carousel-item-prev",c="right"),s&&s.classList.contains("is-active"))return void(this._isSliding=!1);if(!this._triggerSlideEvent(s,c).defaultPrevented&&i&&s){if(this._isSliding=!0,o&&this.pause(),this._setActiveIndicatorElement(s),this._element.classList.contains("slide")){s.classList.add(l),reflow(s),i.classList.add(a),s.classList.add(a);const t=parseInt(s.getAttribute("data-interval"),10);t?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=t):this._config.interval=this._config.defaultInterval||this._config.interval;const e=getTransitionDurationFromElement(i);EventHandler.one(i,TRANSITION_END,()=>{s.classList.remove(a,l),s.classList.add("is-active"),i.classList.remove("is-active",l,a),this._isSliding=!1,setTimeout(()=>{EventHandler.trigger(this._element,SLIDER_EVENT_SLID,{relatedTarget:s,direction:c,from:n,to:r})},0)}),emulateTransitionEnd(i,e)}else i.classList.remove("is-active"),s.classList.add("is-active"),this._isSliding=!1,EventHandler.trigger(this._element,SLIDER_EVENT_SLID,{relatedTarget:s,direction:c,from:n,to:r});o&&this.cycle()}}static sliderInterface(t,e){let i=Data.getData(t,"chichi.slider"),n={...Default,...Manipulator.getDataAttributes(t)};"object"==typeof e&&(n={...n,...e});const s="string"==typeof e?e:n.slide;if(i||(i=new Slider(t,n)),"number"==typeof e)i.to(e);else if("string"==typeof s){if(void 0===i[s])throw new TypeError(`No method named "${s}"`);i[s]()}else n.interval&&n.ride&&(i.pause(),i.cycle())}static dataApiClickHandler(t){const e=getElementFromSelector(this);if(!e||!e.classList.contains("slider"))return;const i={...Manipulator.getDataAttributes(e),...Manipulator.getDataAttributes(this)},n=this.getAttribute("data-slide-to");n&&(i.interval=!1),Slider.sliderInterface(e,i),n&&Data.getData(e,"chichi.slider").to(n),t.preventDefault()}static getInstance(t){return Data.getData(t,"chichi.slider")}}EventHandler.on(document,SLIDER_EVENT_CLICK_DATA_API,SLIDER_SELECTOR_DATA_SLIDE,Slider.dataApiClickHandler),EventHandler.on(window,SLIDER_EVENT_LOAD_DATA_API,()=>{const t=SelectorEngine.find('[data-ride="slider"]');for(let e=0,i=t.length;e<i;e++)Slider.sliderInterface(t[e],Data.getData(t[e],"chichi.slider"))});export default Slider;
//# sourceMappingURL=chichi.min.js.map
